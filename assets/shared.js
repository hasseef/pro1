(function(w){
  const $=(s,r=document)=>r.querySelector(s);
  async function loadJSON(p){try{const r=await fetch(p);return await r.json()}catch(e){return {}}}
  function label(t){const map={individual:'الأفراد',university:'الجامعات',private:'القطاع الخاص',nonprofit:'القطاع غير الربحي',gov:'الجهات الحكومية',donor:'الجهات المانحة',emirate:'الإمارة'};return map[t]||t;}
  function header(){return `<header class="header"><div class="container wrap"><div class="brand"><img src='./assets/hasseef.png' alt='حصيف'><div><div class='title' style='font-weight:800'>منصة حصيف</div><div class='text-sm' style='color:#64748b'>البوابة الوطنية للتكامل التنموي</div></div></div><div class='meta-logos'><img src='./assets/talbiya_initiative.png' title='مبادرة تلبية'><img src='./assets/vision.png' title='رؤية 2030'></div></div><div class='container' style='padding-bottom:10px'><nav class='nav'><a class='btn' href='./index.html'>الرئيسية</a><a class='btn' href='./subscription.html'>الاشتراكات</a><a class='btn' href='./csr.html'>الرعايات CSR</a><a class='btn' href='./faq.html'>الأسئلة الشائعة</a><a class='btn' href='./tickets.html'>الدعم</a><a class='btn' href='./reports.html'>تقارير الأثر</a><a class='btn' href='./security.html'>المسح الأمني</a></nav></div></header>`;}
  function footer(){return `<footer class='footer'>© Hasseef — جميع الحقوق محفوظة<div style='margin-top:6px;display:flex;gap:10px;justify-content:center;align-items:center'><img src='./assets/talbiya_company.png' style='height:28px'><span>الشريك الاستشاري</span></div></footer>`;}
  function homepage(){const m=$('main');m.innerHTML='<section class="card"><div class="section-title">مرحباً بكم في منصة حصيف</div><p>منصة وطنية تربط التحديات بالحـلول والتمويل والتنفيذ وقياس الأثر، بمواءمة مع رؤية المملكة 2030.</p><div class="grid4" style="margin-top:8px">'+['individual','university','private','nonprofit','gov','donor','emirate'].map(t=>`<a class='btn' href='./account.html?type=${t}'>${label(t)}</a>`).join('')+'</div></section>';m.insertAdjacentHTML('beforeend',footer());}
  function accountPage(){const type=new URLSearchParams(location.search).get('type')||'individual';const m=$('main');m.innerHTML=`<section class='card'><div class='section-title'>${label(type)}</div><p>خدمات هذا الحساب مخصصة حسب دوره التنموي.</p><div class='layout'><aside class='sidebar'><div>القائمة</div></aside><div class='card'>محتوى الحساب (${label(type)})</div></div></section>`;m.insertAdjacentHTML('beforeend',footer());}
  function router(){const p=location.pathname;if(p.includes('account'))accountPage();else homepage();}
  document.addEventListener('DOMContentLoaded',()=>{document.body.innerHTML=header()+"<main class='container' style='padding:16px 0'></main>";router();});
})(window);